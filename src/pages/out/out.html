<ion-header>
  <ion-navbar color="primary">
    <ion-title>常规出库</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <form (submit)="scan()">
    <ion-searchbar #searchbar placeholder="{{barTextHolderText}}" [(ngModel)]="code" name="scan" maxlength="24"></ion-searchbar>
  </form>

  <ion-list *ngIf="scanFlag>0">
    <ion-item>
      <ion-label>{{sheet.sheet_no}}<small>({{sheet.supplier_id}})</small></ion-label>
    </ion-item>
  </ion-list>

  <progress-bar [progress]="all_right" *ngIf="all_right>0"></progress-bar>

  <div class="ds-box" *ngIf="current_part_index>=0 && parts[current_part_index]">
      <h4 no-margin>{{parts[current_part_index].part_no}} {{parts[current_part_index].part_name}}</h4>
      <h4 no-margin><small>库位：{{parts[current_part_index].dloc}}</small></h4>
      <!--<h5 (click)="switchSupplier(p)"-->
        <!--<ion-icon name="contact"></ion-icon> {{parts[current_part_index].supplier_name? parts[current_part_index].supplier_name: '（请选择供应商）'}}-->
      <!--</h5>-->
      <p>
        需求{{parts[current_part_index].required_pack_count}}箱，共{{parts[current_part_index].required_part_count}}件（包装数{{parts[current_part_index].pack_stand_qty}}）
      </p>
      <p style="color:#000000">
        本次出库{{parts[current_part_index].received_pack_count}}箱，共{{parts[current_part_index].received_part_count}}件
      </p>
      <button ion-button item-end (click)="changeQty(parts[current_part_index])" [color]="bgColor(parts[current_part_index])">
        非标
      </button>
  </div>

</ion-content>

<ion-footer>
  <ion-row>
    <ion-col no-padding>
      <button no-margin ion-button full large color="danger" [disabled]="!scanFlag" (click)="cancel()">撤销(F2)</button>
    </ion-col>
    <ion-col no-padding>
      <button no-margin ion-button full large color="primary" [disabled]="!scanFlag" (click)="outStock()">出库(F1)</button>
    </ion-col>
  </ion-row>
</ion-footer>
